<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <title>홈이셔</title>
    <script src="{{ url_for('static', filename='js/search.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/condition_modal.css') }}">

</head>

<body>
    <h1>홈화면이용</h1>
    <div class="button-group">
        <a href="/menu"><button type="button">메뉴</button></a>
        <br> <br>
        <div class="search-bar">
            <select id="searchTarget">
                <option value="all" selected>가게명+내용</option>
                <option value="name">가게명</option>
                <option value="content">혜택내용</option>
            </select>
            <input type="text" id="searchInput" placeholder="키워드 검색..." />
            <button onclick="GoSearch()">검색</button>
        </div>
        <br>
        <a href="/map"><button type="button">제휴맵</button></a>
        <button onclick="openModal()">상세조건</button></a>
        <br><br>
        <a href="/bookmark"><button type="button">북마크</button></a>
        <a href="/mypage"><button type="button">마이페이지</button></a>
        <a href="/recent"><button type="button">최근 본</button></a>
    </div>


    <div class="modal" id="conditionModal" onclick="event.stopPropagation()">
        <div class="modal-header">상세조건 설정</div>

        <div class="filter-group">
            <span>제휴 범위 (복수 선택 가능)</span><span id="scope-count">(0/3)</span><br>
            <div id="scope-buttons"></div>
        </div>

        <div class="filter-group">
            <span>혜택 형태 (복수 선택 가능) <span id="type-count">(0/4)</span> </span><br>
            <div id="type-buttons"></div>
        </div>

        <div class="filter-group">
            <span>카테고리 (1개 선택)</span><br>
            <div id="category-buttons"></div>
        </div>

        <button onclick="resetFilters()">초기화</button>
        <button onclick="applyFilters()">적용하기</button>

    </div>

    <script>
        fetch('/benefit/types')
            .then(res => res.json())
            .then(data => {
                data.forEach(t => {
                    benefitTypeMap[t.name] = t.type_id;
                });
            });

        document.addEventListener("DOMContentLoaded", () => {
            insertConditionModal();
            resetFilters();
        });


    </script>

</body>

</html>